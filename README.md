# Организатор файлов для удобной подачи в PLEX

Этот модуль на Python предоставляет функционал для рекурсивного сканирования директорий, сбора метаданных о файлах и организации эпизодов сериалов в структурированную иерархию папок. Включает утилиты для обработки вложенных директорий, переименования файлов и создания согласованной структуры хранения.

Предлагается для организации файлов, в понятном для сервера PLEX виде

Допустим что файлы скачиваются в каталог ~/Movies/Cinema

и библиотека PLEX настроена на ~/Movies/Cinema

## Использование

```python
# Организация сериалов и перемещение файлов в новую структуру
file_dir_renamer("~/Movies/Cinema", leave_originals=False, tv_shows_folder="TV Shows")

Из структуры:

~/Movies/Cinema/
    The Head (Season 1) LostFilm WEB-DLRip/
        The.Head.S01E01.WEB-DLRip.LostFilm.RGzsRutracker.[Wentworth_Miller].avi
        The.Head.S01E02.WEB-DLRip.LostFilm.RGzsRutracker.[Wentworth_Miller].avi
        The.Head.S01E03.WEB-DLRip.LostFilm.RGzsRutracker.[Wentworth_Miller].avi
        The.Head.S01E04.WEB-DLRip.LostFilm.RGzsRutracker.[Wentworth_Miller].avi
        The.Head.S01E05.WEB-DLRip.LostFilm.RGzsRutracker.[Wentworth_Miller].avi
        The.Head.S01E06.WEB-DLRip.LostFilm.RGzsRutracker.[Wentworth_Miller].avi

Превратит в структуру:

~/Movies/Cinema/
    TV Shows/
        The Head/
            Season 01/
                The Head - S01E01.avi
                The Head - S01E02.avi
                The Head - S01E03.avi
                The Head - S01E04.avi
                The Head - S01E05.avi
                The Head - S01E06.avi
---

## Возможности

1. **Рекурсивное сканирование директорий**:
   - Сбор информации обо всех файлах в указанной директории и ее поддиректориях.
   - Отслеживание глубины вложенности для файлов в поддиректориях.

2. **Переименование и организация файлов сериалов**:
   - Определяет эпизоды сериалов на основе шаблонов имен файлов.
   - Переименовывает эпизоды в согласованный формат: `<Название сериала> - S<Сезон>E<Эпизод>.<Расширение>`.
   - Организует эпизоды в структурированную иерархию папок:
     ```
     TV Shows/
         <Название сериала>/
             Season <Номер сезона>/
                 <Название эпизода>
     ```
   - Поддерживает настраиваемое поведение: оставлять оригинальные файлы или перемещать их в новую структуру.

---

## Функции

### `recursive_dir_scaner`
Рекурсивно сканирует директории и собирает информацию о файлах.

**Параметры**:
- `initial_directory` (str): Базовая директория для начала сканирования.
- `ignored_names` (list[str]): Список имен файлов или папок, которые нужно игнорировать (по умолчанию: `['TV Shows', '.DS_Store']`).
- `depth` (int): Текущая глубина рекурсии (по умолчанию: `0`).

**Возвращает**:
- `list[dict]`: Список словарей с ключами:
  - `directory` (str): Полный путь к директории.
  - `path` (str): Полный путь к файлу.
  - `depth` (int): Глубина рекурсии файла.

---

### `file_dir_renamer`
Переименовывает и организует эпизоды сериалов в указанной директории.

**Параметры**:
- `initial_directory` (str): Базовая директория для сканирования и организации.
- `leave_originals` (bool): Оставлять ли оригинальные файлы (по умолчанию: `True`).
- `tv_shows_folder` (str): Название папки, где будут организованы сериалы (по умолчанию: `'TV Shows'`).

**Поведение**:
- Определяет файлы с типичными мультимедийными расширениями (`.mkv`, `.mp4`, `.avi`, `.srt`).
- Использует регулярное выражение для извлечения названия сериала, сезона и номера эпизода из имени файла.
- Переименовывает файлы в стандартный формат.
- Перемещает или копирует переименованные файлы в структурированную иерархию папок.

---
